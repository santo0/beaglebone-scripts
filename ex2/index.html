<!DOCTYPE html>
<html>
<head>
    <title>Home Automation Web Server with BeagleBone</title>
    <script src = "/socket.io/socket.io.js" ></script>
    <script>
        // Establishing connection with server
        var socket = io.connect(); /* global io */
        
        const btn_dict={"USR0":"blink_input_0", 
                        "USR1":"blink_input_1", 
                        "USR2":"blink_input_2", 
                        "USR3":"blink_input_3"}
        // Changes the led mode
        function changeMode(led, mode, modeId){
            let freq;
            if (mode == "blink"){
                freq=document.getElementById(btn_dict[led]).value;
            }else{
                freq="";
            }
            let sData={"led":led, "mode":mode, "freq":freq}
            socket.emit('changeMode', JSON.stringify(sData));
            let showMsg;
            if (mode != "blink"){
                showMsg = "blink : " + freq;
            }else{
                showMsg = mode;
            }
            document.getElementById(modeId).innerHTML = showMsg;
        }
    </script>
    
    <style type="text/css">
        .row {
              width: 100%;
              text-align: center; 
        }
    
        .block {
              width: 200px;
              display: inline-block; 
        }
    </style>
</head>

<div class="row">
    <div class="block">
    <h2>LED0</h2>
    <p id="outputStatus0">Status</p>
    <button type="button" onclick="changeMode('USR0', 'on', 'outputStatus0');">ON</button>
    <button type="button" onclick="changeMode('USR0', 'off', 'outputStatus0');">OFF</button> <br>
    <button type="button" onclick="changeMode('USR0', 'default', 'outputStatus0');">DEFAULT</button>
    <button type="button" onclick="changeMode('USR0', 'heartbeat', 'outputStatus0');">HEARTBEAT</button>
    <button type="button" onclick="changeMode('USR0', 'blink', 'outputStatus0');">BLINK</button>
    <input type="text" id="blink_input_0" name="blink_input_0" size=4>
</div>
<div class="block">
    <h2>LED1</h2>
    <p id="outputStatus1">Status</p>
    <button type="button" onclick="changeMode('USR1', 'on', 'outputStatus1');">ON</button>
    <button type="button" onclick="changeMode('USR1', 'off', 'outputStatus1');">OFF</button> <br>
    <button type="button" onclick="changeMode('USR1', 'default', 'outputStatus1');">DEFAULT</button>
    <button type="button" onclick="changeMode('USR1', 'heartbeat', 'outputStatus1');">HEARTBEAT</button>
    <button type="button" onclick="changeMode('USR1', 'blink', 'outputStatus1');">BLINK</button>
    <input type="text" id="blink_input_1" name="blink_input_1" size=4>
</div>
<div class="block">
    <h2>LED2</h2>
    <p id="outputStatus2">Status</p>
    <button type="button" onclick="changeMode('USR2', 'on', 'outputStatus2');">ON</button>
    <button type="button" onclick="changeMode('USR2', 'off', 'outputStatus2');">OFF</button> <br>
    <button type="button" onclick="changeMode('USR2', 'default', 'outputStatus2');">DEFAULT</button>
    <button type="button" onclick="changeMode('USR2', 'heartbeat', 'outputStatus2');">HEARTBEAT</button>
    <button type="button" onclick="changeMode('USR2', 'blink', 'outputStatus2');">BLINK</button>
    <input type="text" id="blink_input_2" name="blink_input_2" size=4>
</div>
<div class="block">
    <h2>LED3</h2>
    <p id="outputStatus3">Status</p>
    
    <button type="button" onclick="changeMode('USR3', 'on', 'outputStatus3');">ON</button>
    <button type="button" onclick="changeMode('USR3', 'off', 'outputStatus3');">OFF</button> <br>
    <button type="button" onclick="changeMode('USR3', 'default', 'outputStatus3');">DEFAULT</button>
    <button type="button" onclick="changeMode('USR3', 'heartbeat', 'outputStatus3');">HEARTBEAT</button>
    <button type="button" onclick="changeMode('USR3', 'blink', 'outputStatus3');">BLINK</button>
    <input type="text" id="blink_input_3" name="blink_input_3" size=4>
</div>
    
</div>


</body>
</html>